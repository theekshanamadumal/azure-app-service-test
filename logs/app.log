2024-01-19 18:13:44 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-19 18:13:44 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-19 18:17:17 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-19 18:17:17 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-19 18:18:17 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-19 18:18:17 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-19 18:18:49 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-19 18:18:49 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-19 18:20:17 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-19 18:20:17 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 17:28:07 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 17:28:07 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 17:50:12 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 17:50:12 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 17:50:34 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 17:50:34 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 17:52:32 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 17:52:32 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 17:52:32 DEBUG (asyncio) : Using proactor: IocpProactor
2024-01-22 17:52:32 INFO (root) : -------------------------- 000000000000 Hello  initialize API! logging-----------------------------
2024-01-22 17:52:32 INFO (server) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 17:52:32 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 17:53:07 INFO (server) : -------------------------- Hello there! -----------------------------
2024-01-22 17:53:07 INFO (root) : -------------------------- Hello there! -----------------------------
2024-01-22 17:53:28 INFO (server) : -------------------------- userQuery: question='iphone' -------------------------- 
2024-01-22 17:53:28 INFO (controller) : query : iphone
2024-01-22 17:53:28 INFO (qaPipeline) : run_agent : Question: iphone
2024-01-22 17:53:28 INFO (qaPipeline) : run_router_chain : Question: iphone
2024-01-22 17:53:28 DEBUG (openai._base_client) : Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': '\nYou are the AI assistance of a Library. Library provides collecation of research papers under different catogories like science, arts, Social Scienc, Law, Management , Zoology , Chemistry, physics, Biology.\n\nIf a user ask a question you have to classify it to following 3 types Relevant , Greeting , Other.\n\n"Relevant" : If the question is related to research papers.\n"Greeting" : If the question is a greeting like good morning, hi my name is., thank you.\n"Other" : If the question is not related to research papers.\n\nGive the correct name of question type. If you are not sure return "Not Sure" instead.\n\nQuestion : iphone\n'}], 'model': 'mistralai/Mistral-7B-Instruct-v0.1', 'n': 1, 'stream': False, 'temperature': 0.0}}
2024-01-22 17:53:28 DEBUG (httpcore.connection) : connect_tcp.started host='api.endpoints.anyscale.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-01-22 17:53:28 DEBUG (httpcore.connection) : connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000027A22DC4790>
2024-01-22 17:53:28 DEBUG (httpcore.connection) : start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027A226FD1C0> server_hostname='api.endpoints.anyscale.com' timeout=5.0
2024-01-22 17:53:28 DEBUG (httpcore.connection) : start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000027A2278D7D0>
2024-01-22 17:53:28 DEBUG (httpcore.http11) : send_request_headers.started request=<Request [b'POST']>
2024-01-22 17:53:28 DEBUG (httpcore.http11) : send_request_headers.complete
2024-01-22 17:53:28 DEBUG (httpcore.http11) : send_request_body.started request=<Request [b'POST']>
2024-01-22 17:53:28 DEBUG (httpcore.http11) : send_request_body.complete
2024-01-22 17:53:28 DEBUG (httpcore.http11) : receive_response_headers.started request=<Request [b'POST']>
2024-01-22 17:53:29 DEBUG (httpcore.http11) : receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json'), (b'Content-Length', b'389'), (b'Connection', b'keep-alive'), (b'Date', b'Mon, 22 Jan 2024 12:23:29 GMT'), (b'server', b'uvicorn'), (b'x-request-id', b'2fe54ee9-4084-43af-b981-2332539fe8d5'), (b'X-Cache', b'Miss from cloudfront'), (b'Via', b'1.1 4187f012ebd71eb85a8870ea46453784.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'SIN2-P2'), (b'X-Amz-Cf-Id', b'Sqj94DV92gRUDmgsTbDG39xp-7kFlz1c03zf9j_eL9LdbM2_kT9UqA==')])
2024-01-22 17:53:29 INFO (httpx) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-01-22 17:53:29 DEBUG (httpcore.http11) : receive_response_body.started request=<Request [b'POST']>
2024-01-22 17:53:29 DEBUG (httpcore.http11) : receive_response_body.complete
2024-01-22 17:53:29 DEBUG (httpcore.http11) : response_closed.started
2024-01-22 17:53:29 DEBUG (httpcore.http11) : response_closed.complete
2024-01-22 17:53:29 DEBUG (openai._base_client) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "200 OK"
2024-01-22 17:53:29 INFO (qaPipeline) : Answer (took 1.34 s.) chain_type:  Not Sure
2024-01-22 17:53:29 INFO (qaPipeline) : chain_selector : chain_type: not sure Question: iphone
2024-01-22 17:53:29 INFO (qaPipeline) : run_qa_chain : Question: iphone
2024-01-22 17:53:29 DEBUG (urllib3.connectionpool) : Starting new HTTPS connection (1): api-inference.huggingface.co:443
2024-01-22 17:54:43 DEBUG (urllib3.connectionpool) : https://api-inference.huggingface.co:443 "POST /pipeline/feature-extraction/BAAI/bge-large-en-v1.5 HTTP/1.1" 200 None
2024-01-22 17:54:45 DEBUG (httpcore.connection) : connect_tcp.started host='api.endpoints.anyscale.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-01-22 17:54:46 DEBUG (httpcore.connection) : connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000027A233821D0>
2024-01-22 17:54:46 DEBUG (httpcore.connection) : start_tls.started ssl_context=<ssl.SSLContext object at 0x0000027A226FCEF0> server_hostname='api.endpoints.anyscale.com' timeout=5.0
2024-01-22 17:54:46 DEBUG (httpcore.connection) : start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000027A23382190>
2024-01-22 17:54:46 DEBUG (httpcore.http11) : send_request_headers.started request=<Request [b'POST']>
2024-01-22 17:54:46 DEBUG (httpcore.http11) : send_request_headers.complete
2024-01-22 17:54:46 DEBUG (httpcore.http11) : send_request_body.started request=<Request [b'POST']>
2024-01-22 17:54:46 DEBUG (httpcore.http11) : send_request_body.complete
2024-01-22 17:54:46 DEBUG (httpcore.http11) : receive_response_headers.started request=<Request [b'POST']>
2024-01-22 17:54:48 DEBUG (httpcore.http11) : receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json'), (b'Content-Length', b'505'), (b'Connection', b'keep-alive'), (b'Date', b'Mon, 22 Jan 2024 12:24:48 GMT'), (b'server', b'uvicorn'), (b'x-request-id', b'c6c9eb02-ba9a-454e-aa31-79a47d726baa'), (b'X-Cache', b'Miss from cloudfront'), (b'Via', b'1.1 a31f1272d73a641463b7203596a00056.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'MRS52-C2'), (b'X-Amz-Cf-Id', b'zOHmeiyQcXbAM1tBgk2eI3eoLqxCS3kINPJaSY2T8qIy9ZCkXlDybw==')])
2024-01-22 17:54:48 INFO (httpx) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-01-22 17:54:48 DEBUG (httpcore.http11) : receive_response_body.started request=<Request [b'POST']>
2024-01-22 17:54:48 DEBUG (httpcore.http11) : receive_response_body.complete
2024-01-22 17:54:48 DEBUG (httpcore.http11) : response_closed.started
2024-01-22 17:54:48 DEBUG (httpcore.http11) : response_closed.complete
2024-01-22 17:54:48 DEBUG (openai._base_client) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "200 OK"
2024-01-22 20:21:06 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 20:21:06 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 20:37:25 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 20:37:25 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 20:38:41 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 20:38:41 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 20:39:41 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 20:39:41 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 20:40:24 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 20:40:24 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 20:43:15 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 20:43:15 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 20:43:15 DEBUG (asyncio) : Using proactor: IocpProactor
2024-01-22 20:43:15 INFO (root) : -------------------------- 000000000000 Hello  initialize API! logging-----------------------------
2024-01-22 20:43:15 INFO (server) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 20:43:15 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 20:43:59 INFO (server) : -------------------------- Hello there! -----------------------------
2024-01-22 20:43:59 INFO (root) : -------------------------- Hello there! -----------------------------
2024-01-22 20:44:23 INFO (server) : -------------------------- userQuery: question='hi there' -------------------------- 
2024-01-22 20:44:23 INFO (controller) : query : hi there
2024-01-22 20:44:23 INFO (qaPipeline) : run_agent : Question: hi there
2024-01-22 20:44:23 INFO (qaPipeline) : run_router_chain : Question: hi there
2024-01-22 20:44:23 DEBUG (openai._base_client) : Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': '\nYou are the AI assistance of a Library. Library provides collecation of research papers under different catogories like science, arts, Social Scienc, Law, Management , Zoology , Chemistry, physics, Biology.\n\nIf a user ask a question you have to classify it to following 3 types Relevant , Greeting , Other.\n\n"Relevant" : If the question is related to research papers.\n"Greeting" : If the question is a greeting like good morning, hi my name is., thank you.\n"Other" : If the question is not related to research papers.\n\nGive the correct name of question type. If you are not sure return "Not Sure" instead.\n\nQuestion : hi there\n'}], 'model': 'mistralai/Mistral-7B-Instruct-v0.1', 'n': 1, 'stream': False, 'temperature': 0.0}}
2024-01-22 20:44:23 DEBUG (httpcore.connection) : connect_tcp.started host='api.endpoints.anyscale.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-01-22 20:44:23 DEBUG (httpcore.connection) : connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000021C7F72B490>
2024-01-22 20:44:23 DEBUG (httpcore.connection) : start_tls.started ssl_context=<ssl.SSLContext object at 0x0000021C7EB2FA40> server_hostname='api.endpoints.anyscale.com' timeout=5.0
2024-01-22 20:44:23 DEBUG (httpcore.connection) : start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000021C7EF0AE10>
2024-01-22 20:44:23 DEBUG (httpcore.http11) : send_request_headers.started request=<Request [b'POST']>
2024-01-22 20:44:23 DEBUG (httpcore.http11) : send_request_headers.complete
2024-01-22 20:44:23 DEBUG (httpcore.http11) : send_request_body.started request=<Request [b'POST']>
2024-01-22 20:44:23 DEBUG (httpcore.http11) : send_request_body.complete
2024-01-22 20:44:23 DEBUG (httpcore.http11) : receive_response_headers.started request=<Request [b'POST']>
2024-01-22 20:44:24 DEBUG (httpcore.http11) : receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json'), (b'Content-Length', b'390'), (b'Connection', b'keep-alive'), (b'Date', b'Mon, 22 Jan 2024 15:14:25 GMT'), (b'server', b'uvicorn'), (b'x-request-id', b'ab1869f5-71ab-474f-899a-6aafeac7d1ac'), (b'X-Cache', b'Miss from cloudfront'), (b'Via', b'1.1 9f7a987f61c1e9f7d25cd5462f22a14a.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'SIN2-P2'), (b'X-Amz-Cf-Id', b'akobphllmO9JgRXS5DL01tbgi2A3rpM8xbm9n2aAOXbRCVO1Z-jPLw==')])
2024-01-22 20:44:24 INFO (httpx) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-01-22 20:44:24 DEBUG (httpcore.http11) : receive_response_body.started request=<Request [b'POST']>
2024-01-22 20:44:24 DEBUG (httpcore.http11) : receive_response_body.complete
2024-01-22 20:44:24 DEBUG (httpcore.http11) : response_closed.started
2024-01-22 20:44:24 DEBUG (httpcore.http11) : response_closed.complete
2024-01-22 20:44:24 DEBUG (openai._base_client) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "200 OK"
2024-01-22 20:44:24 INFO (qaPipeline) : Answer (took 1.36 s.) chain_type:  Greeting.
2024-01-22 20:44:24 INFO (qaPipeline) : chain_selector : chain_type: greeting. Question: hi there
2024-01-22 20:44:24 INFO (qaPipeline) : run_general_qa_chain : Question: hi there
2024-01-22 20:44:24 DEBUG (openai._base_client) : Request options: {'method': 'post', 'url': '/chat/completions', 'files': None, 'json_data': {'messages': [{'role': 'user', 'content': "<<SYS>>\nYou are the AI assistance of University of colombo Library. Library provides a collecation of research papers under different catogories.\n\nIs the provided question below a greeting? First evaluate whether the input resembles a typical greeting or not.\n\nGreetings are used to say 'hello' and 'how are you? ' and to say 'goodbye' and 'nice speaking with you.' and 'hi im (users name)'Greetings are words used when we want to introduce ourselves to others and when we want to find out how someone is feeling.\n\nYou can only Reply to the users greetings.\nIf the question is a greeting reply accordingly as the AI assistance of the Library.\nIf the question is not related to greetings and research papers say that it is out of your domain.\nIf the question is not clear enough ask for more details and dont try to makeup answers.\n\nAnswer should be pollite, short and simple.\nStart the answer with code word Library AI(Chat):\n<</SYS>>\n\n[INST]\nQuestion: hi there[/INST]"}], 'model': 'mistralai/Mistral-7B-Instruct-v0.1', 'n': 1, 'stream': False, 'temperature': 0.0}}
2024-01-22 20:44:24 DEBUG (httpcore.connection) : connect_tcp.started host='api.endpoints.anyscale.com' port=443 local_address=None timeout=5.0 socket_options=None
2024-01-22 20:44:24 DEBUG (httpcore.connection) : connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000021C7F73AF10>
2024-01-22 20:44:24 DEBUG (httpcore.connection) : start_tls.started ssl_context=<ssl.SSLContext object at 0x0000021C7EB2FD10> server_hostname='api.endpoints.anyscale.com' timeout=5.0
2024-01-22 20:44:24 DEBUG (httpcore.connection) : start_tls.complete return_value=<httpcore._backends.sync.SyncStream object at 0x0000021C7F73AED0>
2024-01-22 20:44:24 DEBUG (httpcore.http11) : send_request_headers.started request=<Request [b'POST']>
2024-01-22 20:44:24 DEBUG (httpcore.http11) : send_request_headers.complete
2024-01-22 20:44:24 DEBUG (httpcore.http11) : send_request_body.started request=<Request [b'POST']>
2024-01-22 20:44:24 DEBUG (httpcore.http11) : send_request_body.complete
2024-01-22 20:44:24 DEBUG (httpcore.http11) : receive_response_headers.started request=<Request [b'POST']>
2024-01-22 20:44:25 DEBUG (httpcore.http11) : receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/json'), (b'Content-Length', b'434'), (b'Connection', b'keep-alive'), (b'Date', b'Mon, 22 Jan 2024 15:14:26 GMT'), (b'server', b'uvicorn'), (b'x-request-id', b'3da60f0d-a6ec-475e-b7d5-efa5764a8005'), (b'X-Cache', b'Miss from cloudfront'), (b'Via', b'1.1 aba5c115363c1a37b7337fdb5a449b1e.cloudfront.net (CloudFront)'), (b'X-Amz-Cf-Pop', b'SIN2-P2'), (b'X-Amz-Cf-Id', b'nPacsnVm8pTt30yAKOrlceVlYOMM-Jn8TIe_Y7ZPVXnjYl4_71a3ww==')])
2024-01-22 20:44:25 INFO (httpx) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "HTTP/1.1 200 OK"
2024-01-22 20:44:25 DEBUG (httpcore.http11) : receive_response_body.started request=<Request [b'POST']>
2024-01-22 20:44:25 DEBUG (httpcore.http11) : receive_response_body.complete
2024-01-22 20:44:25 DEBUG (httpcore.http11) : response_closed.started
2024-01-22 20:44:25 DEBUG (httpcore.http11) : response_closed.complete
2024-01-22 20:44:25 DEBUG (openai._base_client) : HTTP Request: POST https://api.endpoints.anyscale.com/v1/chat/completions "200 OK"
2024-01-22 20:44:25 INFO (qaPipeline) : Answer (took 1.23 s.) 
: {'question': 'hi there', 'text': ' Library AI(Chat): Hello! How can I assist you today?'}
2024-01-22 20:44:25 INFO (qaPipeline) : Answer (took 2.59 s.) 
: {'question': 'hi there', 'answer': ' Library AI(Chat): Hello! How can I assist you today?', 'source_documents': []}
2024-01-22 20:44:25 INFO (server) : --------------------------  answer: {'question': 'hi there', 'answer': ' Library AI(Chat): Hello! How can I assist you today?', 'source_documents': []} -------------------------- 
2024-01-22 21:00:35 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 21:00:35 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 21:01:16 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 21:01:16 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-22 21:01:16 DEBUG (asyncio) : Using proactor: IocpProactor
2024-01-22 21:01:16 INFO (root) : -------------------------- 000000000000 Hello  initialize API! logging-----------------------------
2024-01-22 21:01:16 INFO (server) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-22 21:01:16 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-23 14:39:45 INFO (__main__) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-23 14:39:45 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
2024-01-23 14:39:45 DEBUG (asyncio) : Using proactor: IocpProactor
2024-01-23 14:39:45 INFO (root) : -------------------------- 000000000000 Hello  initialize API! logging-----------------------------
2024-01-23 14:39:45 INFO (server) : -------------------------- Hello  initialize API! logger -----------------------------
2024-01-23 14:39:45 INFO (root) : -------------------------- Hello  initialize API! logging-----------------------------
